<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2v2 Soccer Game (Canvas)</title>
  <style>
    body { margin:0; padding:20px; background:linear-gradient(135deg,#4CAF50,#2E7D32); font:15px Arial; color:#fff; display:flex; flex-direction:column; align-items:center; }
    .game-container { background:#fff; padding:20px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.2); }
    canvas { background:#4CAF50; border:4px solid #2E7D32; border-radius:10px; display:block; }
    .score { display:flex; justify-content:space-around; color:#2E7D32; font-size:28px; font-weight:bold; margin-bottom:10px; }
    .controls,.instructions { color:#333; margin-top:10px; }
    .controls strong { color:#2E7D32; }
    .modal { display:none; position:fixed; top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
    .modal-content { background:#fefefe; padding:30px; border-radius:10px; text-align:center; box-shadow:0 5px 15px rgba(0,0,0,0.3); color:#333; }
    .modal-content h2 { color:#2E7D32; }
    .modal-content button { background:#4CAF50;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer; }
    .modal-content button:hover { background:#2E7D32; }
  </style>
</head>
<body>
  <!-- Game container and canvas setup remains unchanged -->
  <script>
    // Adjusted enemy speeds to be 50% slower
    const enemy1 = { x:650, y:150, r:18, speed:1.5, color:'#D32F2F', hasBall:false };
    const enemy2 = { x:700, y:350, r:18, speed:1.4, color:'#F44336', hasBall:false };

    // Modified AI behavior
    function updateAI(teammate, enemies, dt) {
      const roles = [teammate].concat(enemies);
      roles.forEach(ai => {
        let tx = ai.x, ty = ai.y;

        if (ai.hasBall) {
          // Red team shoots on blue goal
          const goal = ai.color === '#D32F2F' || ai.color === '#F44336' ? goals.blue : goals.red;

          // Pass logic before shooting
          if (!ai.passCount) ai.passCount = 0;

          if (ai.passCount < 2 && Math.random() < 0.02) {
            const teammate = enemies.find(p => p !== ai);
            if (teammate && dist(ai, teammate) < 200) {
              const angle = Math.atan2(teammate.y - ai.y, teammate.x - ai.x);
              ball.vx = Math.cos(angle) * 8;
              ball.vy = Math.sin(angle) * 8;
              ai.hasBall = false;
              ball.owner = null;
              ai.passCount++;
              return;
            }
          } else if (ai.passCount >= 2 && dist(ai, goal) < 250 && Math.random() < 0.03) {
            shoot(ai, goal, 13);
            ai.passCount = 0;
            return;
          }

          tx = goal.x - 100;
          ty = goal.y + goal.h / 2;
        } else {
          tx = ball.x; ty = ball.y;
        }

        const d = dist(ai, {x:tx, y:ty});
        if (d > 5) {
          ai.x += ((tx - ai.x) / d) * ai.speed;
          ai.y += ((ty - ai.y) / d) * ai.speed;
        }
        clamp(ai);

        // Steal ball on contact
        if (!ai.hasBall && dist(ai, ball) < ai.r + ball.r + 5) {
          ball.owner = ai;
          ai.hasBall = true;
        }

        if (ai.hasBall) {
          ball.x = ai.x;
          ball.y = ai.y;
        }
      });
    }

    // Ball possession update (also supports steal)
    function checkPossession() {
      let nearest = null, md = Infinity;
      players.forEach(p => {
        const d = dist(p, ball);
        if (d < p.r + ball.r + 5 && d < md) md = d, nearest = p;
      });
      players.forEach(p => p.hasBall = false);
      if (nearest) {
        ball.owner = nearest;
        nearest.hasBall = true;
      } else ball.owner = null;
    }
  </script>
</body>
</html>
